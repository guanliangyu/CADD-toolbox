"""
åˆ†å­åº“ä»£è¡¨æ€§å­é›†é€‰æ‹©ç³»ç»Ÿ - ä¸»é¡µ
"""
import os

import sys
import streamlit as st

# æ·»åŠ é¡¹ç›®æ ¹ç›®å½•åˆ°è·¯å¾„ï¼Œç¡®ä¿èƒ½å¯¼å…¥utilsæ¨¡å—
script_dir = os.path.dirname(os.path.abspath(__file__))
sys.path.append(script_dir)

# å¯¼å…¥å·¥å…·æ¨¡å—
from utils.state_utils import initialize_session_state, display_state_sidebar

# è®¾ç½®é¡µé¢æ ‡é¢˜å’Œé…ç½®
st.set_page_config(
    page_title="åˆ†å­åº“ä»£è¡¨æ€§å­é›†é€‰æ‹©ç³»ç»Ÿ",
    page_icon="ğŸ§ª",
    layout="wide",
    initial_sidebar_state="expanded"
)

# åˆå§‹åŒ–ä¼šè¯çŠ¶æ€
initialize_session_state()

# åœ¨ä¾§è¾¹æ æ˜¾ç¤ºå½“å‰çŠ¶æ€
display_state_sidebar()

# ä¸»é¡µå†…å®¹
st.title("åˆ†å­åº“ä»£è¡¨æ€§å­é›†é€‰æ‹©ç³»ç»Ÿ ğŸ§ª")

st.markdown("""
## æ¬¢è¿ä½¿ç”¨åˆ†å­åº“ä»£è¡¨æ€§å­é›†é€‰æ‹©ç³»ç»Ÿ

æœ¬åº”ç”¨å®ç°äº†ä»å¤§å‹åˆ†å­åº“ä¸­æå–ä»£è¡¨æ€§å­é›†çš„æµç¨‹ï¼Œä¸»è¦åŠŸèƒ½åŒ…æ‹¬ï¼š
- åˆ†å­è¿‡æ»¤å’Œæ ‡å‡†åŒ–
- 2DæŒ‡çº¹å’Œç†åŒ–æ€§è´¨è®¡ç®—
- 3Dæ„è±¡ç”Ÿæˆå’Œå½¢çŠ¶ç‰¹å¾è®¡ç®—
- å¤šç§èšç±»ç®—æ³•æ”¯æŒ
- å­é›†ä»£è¡¨æ€§éªŒè¯ä¸è¯„ä»·

### ä½¿ç”¨æµç¨‹

1. **æ•°æ®å¤„ç†é¡µé¢**ï¼šä¸Šä¼ åˆ†å­æ•°æ®ã€é…ç½®å‚æ•°å¹¶å¤„ç†åˆ†å­
2. **èšç±»ä¸é€‰æ‹©é¡µé¢**ï¼šå¯¹å¤„ç†åçš„åˆ†å­è¿›è¡Œèšç±»å¹¶é€‰æ‹©ä»£è¡¨æ€§åˆ†å­
3. **éªŒè¯ä¸ä¸‹è½½é¡µé¢**ï¼šéªŒè¯é€‰æ‹©çš„å­é›†è´¨é‡å¹¶ä¸‹è½½ç»“æœ
4. **å¯è§†åŒ–åˆ†æé¡µé¢**ï¼šå¯¹åˆ†å­å’Œå­é›†è¿›è¡Œå¯è§†åŒ–åˆ†æ
5. **æ‰¹å¤„ç†é¡µé¢**ï¼šæ‰¹é‡å¤„ç†å¤šä¸ªæ•°æ®é›†

### å¿«é€Ÿå¼€å§‹

è¯·ç‚¹å‡»å·¦ä¾§èœå•ä¸­çš„"æ•°æ®å¤„ç†"å¼€å§‹ä½¿ç”¨ç³»ç»Ÿï¼Œæˆ–è€…ç‚¹å‡»ä¸‹æ–¹æŒ‰é’®ç›´æ¥è¿›å…¥ç›¸åº”é¡µé¢ï¼š
""")

# åˆ›å»ºæŒ‰é’®è¡Œ
col1, col2, col3 = st.columns(3)

with col1:
    if st.button("æ•°æ®å¤„ç†", use_container_width=True):
        st.switch_page("pages/1_æ•°æ®å¤„ç†.py")
        
with col2:
    if st.button("èšç±»ä¸é€‰æ‹©", use_container_width=True):
        st.switch_page("pages/2_èšç±»ä¸é€‰æ‹©.py")
        
with col3:
    if st.button("éªŒè¯ä¸ä¸‹è½½", use_container_width=True):
        st.switch_page("pages/3_éªŒè¯ä¸ä¸‹è½½.py")

# åˆ›å»ºç¬¬äºŒè¡ŒæŒ‰é’®
col4, col5, _ = st.columns(3)

with col4:
    if st.button("å¯è§†åŒ–åˆ†æ", use_container_width=True):
        st.switch_page("pages/4_å¯è§†åŒ–åˆ†æ.py")
        
with col5:
    if st.button("æ‰¹å¤„ç†", use_container_width=True):
        st.switch_page("pages/5_æ‰¹å¤„ç†.py")

# æ·»åŠ åº”ç”¨ç¨‹åºä¿¡æ¯
st.markdown("""
---
### å…³äºæœ¬ç³»ç»Ÿ

æœ¬ç³»ç»ŸåŸºäºRDKitã€Streamlitå’Œscikit-learnç­‰å¼€æºå·¥å…·å¼€å‘ï¼Œæ”¯æŒå¤šç§åˆ†å­èšç±»å’Œé€‰æ‹©ç®—æ³•ï¼Œ
èƒ½å¤Ÿé«˜æ•ˆå¤„ç†å¤§è§„æ¨¡åˆ†å­åº“ï¼Œæ˜¯è¯ç‰©å‘ç°å’Œè™šæ‹Ÿç­›é€‰ä¸­çš„å®ç”¨å·¥å…·ã€‚

#### æ”¯æŒçš„åˆ†å­è¡¨ç¤º
- MorganæŒ‡çº¹ï¼ˆECFP4/FCFP6ï¼‰
- RDKitæ‹“æ‰‘æŒ‡çº¹
- MACCSç»“æ„é”®
- ç†åŒ–æ€§è´¨ï¼ˆåˆ†å­é‡ã€LogPã€TPSAç­‰ï¼‰
- 3Dæ„è±¡ç‰¹å¾ï¼ˆå¯é€‰ï¼‰

#### æ”¯æŒçš„èšç±»ç®—æ³•
- Butinaèšç±»ï¼ˆåŸºäºç›¸ä¼¼åº¦é˜ˆå€¼ï¼‰
- K-meansèšç±»ï¼ˆåŸºäºæ¬§å‡ é‡Œå¾—è·ç¦»ï¼‰
- MaxMiné€‰æ‹©ï¼ˆåŸºäºæœ€å¤§æœ€å°è·ç¦»åŸåˆ™ï¼‰

#### å¯è§†åŒ–å’ŒéªŒè¯åŠŸèƒ½
- è¦†ç›–åº¦åˆ†æ
- å±æ€§åˆ†å¸ƒå¯¹æ¯”
- æœ€è¿‘é‚»åˆ†æ
- åˆ†å­ç»“æ„å¯è§†åŒ–
- èšç±»ç»“æœå¯è§†åŒ–
""")

# é¡µé¢åº•éƒ¨ä¿¡æ¯
st.sidebar.markdown("---")
st.sidebar.info(
    "æœ¬åº”ç”¨ç”±VSå¼€å‘å›¢é˜Ÿå¼€å‘ã€‚"
) 